# ================================================================
# SchoolOS Environment Configuration
# ================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env files to version control
# ================================================================

# ============== ENVIRONMENT ==============
NODE_ENV=development
LOG_LEVEL=debug

# ============== API SERVER ==============
API_HOST=localhost
API_PORT=3001
API_BASE_URL=http://localhost:3001

# ============== WEB APP ==============
WEB_PORT=3000
NEXT_PUBLIC_API_URL=http://localhost:3001
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ============== DATABASE ==============
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA
DATABASE_URL=postgresql://schoolos:schoolos_dev_password@localhost:5432/schoolos?schema=public

# Connection pool settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# ============== REDIS ==============
# Redis connection URL
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=

# Cache TTL defaults (in seconds)
CACHE_TTL_DEFAULT=300
CACHE_TTL_RELATIONSHIPS=3600
CACHE_TTL_PERMISSIONS=900

# ============== VECTOR DATABASE ==============
# Pinecone configuration
PINECONE_API_KEY=your_pinecone_api_key
PINECONE_ENVIRONMENT=us-east-1-aws
PINECONE_INDEX_NAME=schoolos-knowledge

# OR use pgvector (set VECTOR_DB_TYPE=pgvector)
VECTOR_DB_TYPE=pgvector
VECTOR_DB_URL=${DATABASE_URL}

# ============== AUTHENTICATION ==============
# JWT Configuration (RS256)
# Generate keys: openssl genrsa -out private.pem 2048
#                openssl rsa -in private.pem -pubout -out public.pem
JWT_PRIVATE_KEY=-----BEGIN RSA PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END RSA PRIVATE KEY-----
JWT_PUBLIC_KEY=-----BEGIN PUBLIC KEY-----\nYOUR_PUBLIC_KEY_HERE\n-----END PUBLIC KEY-----

# Token expiration
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=7d

# Cookie settings
COOKIE_SECRET=your_super_secret_cookie_key_min_32_chars
COOKIE_DOMAIN=localhost
COOKIE_SECURE=false

# Password hashing
BCRYPT_ROUNDS=12

# Rate limiting
AUTH_RATE_LIMIT_TTL=900
AUTH_RATE_LIMIT_MAX=5
AUTH_LOCKOUT_THRESHOLD=5
AUTH_LOCKOUT_DURATION=900

# ============== OPENAI AI ==============
# OpenAI API key for GPT models (intent classification, response generation)
# Get your key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# Models (defaults shown)
DEFAULT_INTENT_MODEL=gpt-4.1-mini
DEFAULT_RESPONSE_MODEL=gpt-4.1
ANTHROPIC_API_KEY=sk-ant-your_anthropic_api_key
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022
ANTHROPIC_MAX_TOKENS=4096
ANTHROPIC_TEMPERATURE=0.3

# AI Safety
AI_MAX_CONVERSATION_TURNS=50
AI_REQUIRE_SOURCE_CITATION=true
AI_CONFIDENCE_THRESHOLD=0.7

# ============== EMAIL ==============
# SMTP Configuration
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_smtp_user
SMTP_PASSWORD=your_smtp_password
EMAIL_FROM=noreply@schoolos.com
EMAIL_FROM_NAME=SchoolOS

# ============== FILE STORAGE ==============
# S3-compatible storage
STORAGE_TYPE=s3
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1
S3_BUCKET=schoolos-documents
S3_ENDPOINT=

# OR use local storage (development only)
# STORAGE_TYPE=local
# LOCAL_STORAGE_PATH=./uploads

# ============== EXTERNAL INTEGRATIONS ==============
# PowerSchool
POWERSCHOOL_API_URL=
POWERSCHOOL_CLIENT_ID=
POWERSCHOOL_CLIENT_SECRET=

# Skyward
SKYWARD_API_URL=
SKYWARD_API_KEY=

# Canvas LMS
CANVAS_API_URL=
CANVAS_ACCESS_TOKEN=

# Google Classroom
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=

# ============== MONITORING ==============
# Sentry
SENTRY_DSN=
SENTRY_ENVIRONMENT=${NODE_ENV}
SENTRY_TRACES_SAMPLE_RATE=0.1

# DataDog
DATADOG_API_KEY=
DATADOG_APP_KEY=

# ============== FEATURE FLAGS ==============
FEATURE_AI_CHAT=true
FEATURE_DOCUMENT_UPLOAD=true
FEATURE_SIS_SYNC=false
FEATURE_LMS_SYNC=false
FEATURE_MOBILE_APP=false

# ============== CORS ==============
CORS_ORIGINS=http://localhost:3000,http://localhost:19006
CORS_CREDENTIALS=true

# ============== SECURITY ==============
# Content Security Policy
CSP_REPORT_URI=
ENABLE_AUDIT_LOGGING=true

# API Keys for internal services
INTERNAL_API_KEY=your_internal_api_key_for_service_communication

# ============== DEVELOPMENT ONLY ==============
# These should NEVER be set in production
DEBUG=false
FORCE_COLORS=true
PRISMA_QUERY_LOG=false
